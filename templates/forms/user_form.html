{% extends "base.html" %}
{% block title %}{{ form_title }} - Sistema Electoral ERP{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-user-plus me-2"></i>
                        {{ form_title }}
                    </h5>
                </div>
                <div class="card-body">
                    <form id="userForm" method="POST">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="nombre_completo" class="form-label">Nombre Completo *</label>
                                    <input type="text" class="form-control" id="nombre_completo" name="nombre_completo" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="username" class="form-label">Usuario *</label>
                                    <input type="text" class="form-control" id="username" name="username" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="rol" class="form-label">Rol *</label>
                                    <select class="form-select" id="rol" name="rol" required>
                                        <option value="">Seleccionar rol...</option>
                                        <option value="super_admin">Super Administrador</option>
                                        <option value="admin_departamental">Admin Departamental</option>
                                        <option value="admin_municipal">Admin Municipal</option>
                                        <option value="coordinador_electoral">Coordinador Electoral</option>
                                        <option value="coordinador_municipal">Coordinador Municipal</option>
                                        <option value="jurado_votacion">Jurado de Votación</option>
                                        <option value="testigo_electoral">Testigo Electoral</option>
                                        <option value="testigo_mesa">Testigo de Mesa</option>
                                        <option value="auditor_electoral">Auditor Electoral</option>
                                        <option value="observador_internacional">Observador Internacional</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="municipio_id" class="form-label">Municipio</label>
                                    <select class="form-select" id="municipio_id" name="municipio_id">
                                        <option value="">Seleccionar municipio...</option>
                                        <option value="1">Florencia</option>
                                        <option value="2">San Vicente del Caguán</option>
                                        <option value="3">Puerto Rico</option>
                                        <option value="4">El Paujil</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="activo" class="form-label">Estado</label>
                                    <select class="form-select" id="activo" name="activo">
                                        <option value="1" selected>Activo</option>
                                        <option value="0">Inactivo</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label for="observaciones" class="form-label">Observaciones</label>
                                    <textarea class="form-control" id="observaciones" name="observaciones" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary me-2">
                                    <i class="fas fa-save me-1"></i>Guardar Usuario
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="history.back()">
                                    <i class="fas fa-arrow-left me-1"></i>Cancelar
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block role_scripts %}
<script>
document.getElementById('userForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Simular guardado
    const formData = new FormData(this);
    const userData = Object.fromEntries(formData);
    
    console.log('Guardando usuario:', userData);
    
    // Mostrar mensaje de éxito
    alert('Usuario creado exitosamente');
    
    // Redirigir a la lista de usuarios
    window.location.href = '/users';
});
</script>
{% endblock %}